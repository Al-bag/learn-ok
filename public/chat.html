<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Byno Kev</title>
  
  <!-- Favicon -->
  <link rel="icon" href="img/icon.ico">

  <!-- Bootstrap CSS & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  
  <!-- Google Fonts: Poppins -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Custom Styles -->
  <link rel="stylesheet" href="css/chat.css" type="text/css" media="all" />
</head>
<body class="h-100">

  <!-- Main container for the app -->
  <div class="container-fluid main-container p-0">
    <div class="row g-0 chat-row">

      <!-- Sidebar -->
      <aside class="col-md-4 col-lg-3 d-flex flex-column p-3 sidebar" id="sidebar">
        <!-- User Info -->
        <div id="user-info" class="d-flex align-items-center mb-4 p-2">
            <!-- Content will be injected by JS -->
        </div>

        <!-- Room List -->
        <h6 class="text-muted small text-uppercase px-2 mb-2">Your Rooms</h6>
        <div class="list-group flex-grow-1 overflow-auto mainCont mb-3">
            <!-- Room items will be dynamically inserted here -->
        </div>
        
        <!-- Online Users List -->
        <h6 class="text-muted small text-uppercase px-2 mb-2">Online in Room</h6>
        <div id="user-list" class="list-group flex-grow-1 overflow-auto">
            <!-- Online users will be dynamically inserted here -->
        </div>
      </aside>

      <!-- Overlay for mobile view when sidebar is open -->
      <div class="chat-overlay" onclick="toggleSidebar()"></div>

      <!-- Main Chatbox Area -->
      <main class="col-md-8 col-lg-9 d-flex flex-column p-0">
        <!-- Chat Header -->
        <div class="chat-header d-flex align-items-center p-3">
            <button class="btn btn-dark d-md-none me-3" onclick="toggleSidebar()">
                <i class="bi bi-list fs-5"></i>
            </button>
            <h4 class="mb-0 fw-bold">Room: <span id="roomName" class="fw-bold">...</span></h4>
            <button onclick="logout()" class="btn btn-outline-secondary ms-auto fw-semibold"><i class="bi bi-box-arrow-right me-2"></i>Logout</button>
        </div>

        <!-- Messages Area -->
        <div class="messages-area d-flex flex-column gap-3 p-3 p-md-4" id="messages">
            <!-- Messages will be injected here -->
        </div>

        <!-- Typing Indicator -->
        <div id="typing-indicator" class="px-3 pb-2 text-muted small fst-italic" style="height: 20px;">
            <!-- Typing users will be shown here -->
        </div>

        <!-- Message Input Area -->
        <div class="input-area mt-auto p-3">
            <div class="input-group">
                <button class="btn btn-outline-secondary" type="button" onclick="document.getElementById('file').click();" title="Attach File">
                    <i class="bi bi-paperclip fs-5"></i>
                </button>
                <input type="file" id="file" class="d-none">
                <input type="text" id="input" class="form-control form-control-lg" placeholder="Type a message...">
                <button class="btn btn-primary" type="button" id="sendBtn" title="Send Message">
                    <i class="bi bi-send-fill fs-5"></i>
                </button>
            </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Bootstrap Modal for Confirmation & Info -->
  <div class="modal fade" id="appModal" tabindex="-1" aria-labelledby="appModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="appModalLabel">Confirmation</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Modal content goes here.</p>
        </div>
        <div class="modal-footer">
          <!-- Buttons will be dynamically added here by JS -->
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Socket.IO Client -->
  <script src="/socket.io/socket.io.js"></script>
  <!-- Your Chat Logic -->
  <script src="js/chat.js"></script>

</body>
        </html>
